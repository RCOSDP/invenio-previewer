{# -*- coding: utf-8 -*-
#}

{%- extends config.PREVIEWER_ABSTRACT_TEMPLATE %}

<html>
  <head>
    <title>{{_('Preview')}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {%- block head %}
    {%- for bdl in css_bundles %}
      {%- assets bdl %}
    <link href="{{ ASSET_URL }}" rel="stylesheet">
      {%- endassets %}
    {%- endfor %}
    {%- endblock %}
  </head>
  <body>
    {%- block page_body %}
<div width="100%" id="dwv">
    <div width="100%" class="layerContainer">
        <canvas width="100%" class="imageLayer"></canvas>
    </div>
</div>
    {% endblock %}
    {%- block javascript %}
    {%- for bdl in js_bundles %}
      {%- assets bdl %}
    <script src="{{ ASSET_URL }}"></script>
      {%- endassets %}
    {%- endfor %}
    <script type="text/javascript">
$(document).ready(function(){

dwv.image.decoderScripts = {
    "jpeg2000": "/static/js/dwv/decoders/pdfjs/decode-jpeg2000.js",
    "jpeg-lossless": "/static/js/dwv/decoders/rii-mango/decode-jpegloss.js",
    "jpeg-baseline": "/static/js/dwv/decoders/pdfjs/decode-jpegbaseline.js"
};


// base function to get elements
dwv.gui.getWindowSize = dwv.gui.base.getWindowSize;
dwv.gui.getElement = dwv.gui.base.getElement;
dwv.gui.displayProgress = function (percent) {};
dwv.gui.refreshElement = dwv.gui.base.refreshElement;


// create the dwv app
var app = new dwv.App();
// initialise with the id of the container div
app.init({
    "containerDivId": "dwv",
        "fitToWindow": true,
        "isMobile": true
});


// load dicom data
app.loadURLs(["{{ file.uri }}"]);
});
</script>
    {%- endblock %}
  </body>
</html>


